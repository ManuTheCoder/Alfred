var fs=require("fs"),contents=fs.readFileSync("index.html").toString();const express=require("express"),app=express(),{MessageAttachment:MessageAttachment}=require("discord.js"),port=3e3,fetch=require("node-fetch");app.get("/",(e,t)=>t.send(contents)),app.listen(3e3,()=>{console.log("Alfred listening at http://localhost:3000")});const Discord=require("discord.js"),client=new Discord.Client,disbut=require("discord.js-buttons")(client),{AutoPoster:AutoPoster}=require("topgg-autoposter"),Topgg=require("@top-gg/sdk"),ytdl=require("ytdl-core");var figlet=require("figlet");const lyricsFinder=require("lyrics-finder"),ap=AutoPoster("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijg0NDMwMzM5NDMzNTA5Njg2MiIsImJvdCI6dHJ1ZSwiaWF0IjoxNjI3NTY3NjY0fQ.KFNNb7hUOX_WUCRo_Rl1dBpjaKYIs_PFMiSjcQGyrys",client);ap.on("posted",e=>{console.log("Posted stats to Top.gg!"),console.log(e),client.on("message",async t=>{"-a vote"==t.content.toLowerCase()&&t.channel.send((new Discord.MessageEmbed).setTitle("Vote").setURL("https://top.gg/bot/844303394335096862/vote").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Vote Link","https://top.gg/bot/844303394335096862/vote").setDescription(`\nVote Stats\n\n**Server Count**\n${e.serverCount}\n\n**Votes**\n${abbrNum(e.shardCount,2)}\n`))})});const webhook=new Topgg.Webhook("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijg0NDMwMzM5NDMzNTA5Njg2MiIsImJvdCI6dHJ1ZSwiaWF0IjoxNjI3NTY3NjY0fQ.KFNNb7hUOX_WUCRo_Rl1dBpjaKYIs_PFMiSjcQGyrys");app.post("/dblwebhook",webhook.listener(e=>{console.log(e.user),console.log(e);const t=client.users.get(e.user);t&&t.send((new Discord.MessageEmbed).setTitle("Thank you for voting!").setDescription("Prizes coming soon!").setURL("https://top.gg/bot/844303394335096862/vote").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]))}));var dice1=[1,2,3,4,5,6],cf=["Heads","Tails"];function getArrayRandomElement(e){if(e&&e.length)return e[Math.floor(Math.random()*e.length)]}client.login(process.env.discordToken);const talkedRecently=new Set,pet_actions=new Set,passive_mode_cooldown=new Set;function getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function compare(e,t){return e.VALUE<t.VALUE?-1:e.VALUE>t.VALUE?1:0}function ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}function toTitleCase(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].substr(1);return t.join(" "),t}function matchYoutubeUrl(e){var t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(t)&&e.match(t)[1]}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function validURL(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}function abbrNum(e,t){t=Math.pow(10,t);for(var a=["k","m","b","t"],n=a.length-1;n>=0;n--){var s=Math.pow(10,3*(n+1));if(s<=e){1e3==(e=Math.round(e*t/s)/t)&&n<a.length-1&&(e=1,n++),e+=a[n];break}}return e}client.on("guildMemberAdd",e=>{e.send("Welcome to the server! To get a list of commands, type  `-a help`.")}),client.on("clickButton",async e=>{switch(console.log(e),e.message.delete(),e.id){case"click_to_function":break;case"cf_restart":e.channel.send("-a coinflip");break;case"dr_restart":e.channel.send("-a roll dice")}}),client.on("message",async e=>{switch(console.log(e.content),e.content.toLowerCase()){case"-a toggle passive mode":if(passive_mode_cooldown.has(e.author.id)){var t=(new Discord.MessageEmbed).setTitle("Slow it down!").setColor([222,38,53]).setDescription("You cannot enable passive mode again in 1 hour");e.channel.send(t)}else{"undefined"!==(h=JSON.parse(fs.readFileSync("./database/passive.json","utf-8")))[e.author.id]?0==h[e.author.id]?(h[e.author.id]=!0,e.reply("Passive mode enabled")):(h[e.author.id]=!1,e.reply("Passive mode disabled")):h[e.author.id]=!1,fs.writeFileSync("./database/passive.json",JSON.stringify(h,null,"\t"),"utf-8"),passive_mode_cooldown.add(e.author.id),setTimeout(()=>{passive_mode_cooldown.delete(e.author.id)},36e5)}break;case"-a hello":e.reply("Hello!");break;case"-a credits":let H=(new disbut.MessageButton).setStyle("red").setLabel("View Website").setID("click_to_function").setURL("[click_to_function](https://alfred.manuthecoder.ml)");t=(new Discord.MessageEmbed).setTitle("Credits").setColor([235,229,73]).setDescription("Thanks to these people and services for keeping this bot up & running!").addField("People","\n@ManuTheCoder#5821\n@R22 Gamer#8398").addField("Services","\n\tNode.JS\n\tExpressJS\n\tCatAas (For cute cats!!!)\n\tPicsum.photos (For random photos)\n\tRepl.it\n\tGitHub\t\t\t\t\t\n\t");e.channel.send(t),e.channel.send("‚Äé",H);break;case"-a flip coin":case"-a coinflip":var a=(new disbut.MessageButton).setStyle("red").setLabel("Coin Flip again").setID("cf_restart");t=(new Discord.MessageEmbed).setTitle("<:Alferdocoins:856991023754772521> Coin Flip <:Alferdocoins:856991023754772521>").setColor([235,229,73]).addField("Result: ",getArrayRandomElement(cf));e.channel.send(t),e.channel.send("‚Äé",a);break;case"-a roll dice":case"-a diceroll":var n=dice1[Math.floor(Math.random()*dice1.length)];switch(n){case 1:var s="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg";break;case 2:s="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Dice-2-b.svg/1200px-Dice-2-b.svg.png";break;case 3:s="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Dice-3-b.svg/1024px-Dice-3-b.svg.png";break;case 4:s="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Dice-4-b.svg/557px-Dice-4-b.svg.png";break;case 5:s="https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Dice-5-b.svg/1200px-Dice-5-b.svg.png";break;case 6:s="https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/Dice-6-b.svg/768px-Dice-6-b.svg.png"}e.react("‚úÖ");t=(new Discord.MessageEmbed).setColor([255,255,255]).setTitle("Dice Roll").setThumbnail(s).addField("Result ",n);e.channel.send(t);a=(new disbut.MessageButton).setStyle("red").setLabel("Dice Roll again").setID("dr_restart");e.channel.send("‚Äé",a);break;case"-a beg":if(talkedRecently.has(e.author.id)){t=(new Discord.MessageEmbed).setTitle("Slow it down!").setColor([222,38,53]).setDescription("Whoah whoah woah. Easy there buddy! There's no point in spamming this command. You are tired from begging, and you need to wait 2 seconds before working again,  <@!"+e.author+">");e.channel.send(t)}else{if("Tails"==cf[Math.floor(Math.random()*cf.length)]){var o=JSON.parse(fs.readFileSync("./database/money.json","utf-8")),i=getRandomInt(1,10);"null"==o[e.author.id]||"undefined"==o[e.author.id]||null==o[e.author.id]?o[e.author.id]=1:o[e.author.id]=o[e.author.id]+i;t=(new Discord.MessageEmbed).setTitle("Beg").setColor([235,229,73]).addField("Coins Earned: ",i+" coins").addField("Coin Balance: ",o[e.author.id]+" coins");e.channel.send(t),fs.writeFileSync("./database/money.json",JSON.stringify(o,null,"\t"),"utf-8"),e.react("ü™ô")}else e.channel.send("No coins earned");talkedRecently.add(e.author.id),setTimeout(()=>{talkedRecently.delete(e.author.id)},2e3)}break;case"-a random image":e.channel.send(`\n\t\t\thttps://picsum.photos/${getRandomInt(100,1e3)}/${getRandomInt(100,1e3)}?nocache=${encodeURI(new Date)}\n\t\t\t`);break;case"-a koala":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/koala",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a red panda":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/red_panda",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a raccoon":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/raccoon",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a kangaroo":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/kangaroo",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a panda":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/panda",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a fox":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/fox",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a bird":case"-a birb":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/birb",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a cat":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;fetch("https://some-random-api.ml/animal/cat",{method:"Get"}).then(e=>e.json()).then(t=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.image).setDescription("**Fun fact:** "+t.fact).setImage(t.image).setTitle("View Picture"))})});break;case"-a anime hug":case"-a anime wink":case"-a anime pat":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(t=>{t.id;fetch("https://some-random-api.ml/animu/"+e.content.replace("-a anime ",""),{method:"Get"}).then(e=>e.json()).then(e=>{t.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(e.link).setImage(e.link).setTitle("View Picture"))})});break;case"-a count":var r=0,d=setInterval(function(){r<100?(r++,e.channel.send(r)):clearTimeout(d)},100);break;case"-a lenny":e.channel.send(getArrayRandomElement(["( Õ°¬∞ Õú ñ Õ°¬∞)","( Õ†¬∞ Õü ñ Õ°¬∞)","( Õ°~ Õú ñ Õ°¬∞)","( Õ° ò Õú ñ Õ° ò)","( Õ°o Õú ñ Õ°o)","(¬∞ Õú ñ ¬∞)","( ‚Äæ ñÃ´‚Äæ)","( ‡≤† Õú ñ‡≤†)","( Õ°¬∞  ñÃØ Õ°¬∞)","( Õ°‡≤• Õú ñ Õ°‡≤•)","‡ºº  Õ°¬∞ Õú ñ Õ°¬∞ ‡ºΩ","(‚ñÄÃøƒπÃØ‚ñÄÃø Ãø)","( ‚úß‚âñ Õú ñ‚âñ)","(‡∏á Õ†¬∞ ÕüŸÑÕú Õ°¬∞)‡∏á","(Õ° Õ°¬∞ Õú „Å§ Õ°Õ°¬∞) ","[Ã≤ÃÖ$Ã≤ÃÖ(Ã≤ÃÖ Õ°¬∞ Õú ñ Õ°¬∞Ã≤ÃÖ)Ã≤ÃÖ$Ã≤ÃÖ]","(‚úø‚ù¶ Õú ñ ‚ù¶)","·ï¶( Õ°¬∞ Õú ñ Õ°¬∞)·ï§","¬Ø_( Õ°¬∞ Õú ñ Õ°¬∞)_/¬Ø","(‚ïØ Õ†¬∞ Õü ñ Õ°¬∞)‚ïØ‚îª‚îÅ‚îª","( Õ°¬∞( Õ°¬∞ Õú ñ( Õ°¬∞ Õú ñ Õ°¬∞) ñ Õ°¬∞) Õ°¬∞)","¬Ø_(„ÉÑ)_/¬Ø","‡≤†_‡≤†"]));break;case"-a shop":t=(new Discord.MessageEmbed).setTitle("Shop").setColor([235,229,73]).setDescription("\n$300 `-a buy padlock` - Prevent people from stealing your money!\n\t\t\t\t\t");e.channel.send(t);break;case"-a pet list":t=(new Discord.MessageEmbed).setTitle("Pets").setThumbnail("http://dogprintsgrooming.com/wp-content/uploads/2015/03/Dog_Print_Icons_3.png").setFooter("Tip: Enter -a buy [PET NAME] to buy a pet\n Example: -a buy dog").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Pets","\n**Dog** -   300 <:Alferdocoins:856991023754772521>\n**Cat** -   300 <:Alferdocoins:856991023754772521>\n**Parrot** -   350 <:Alferdocoins:856991023754772521>\n**Rock** -  300 <:Alferdocoins:856991023754772521>\n**Frog** -  400 <:Alferdocoins:856991023754772521>\n**Lizard** -  400 <:Alferdocoins:856991023754772521>\n**Owl** -  500 <:Alferdocoins:856991023754772521>\n**Snake** -   550 <:Alferdocoins:856991023754772521>\n**Tropical Parakeet** -   600 <:Alferdocoins:856991023754772521>\n**Cougar** -  600 <:Alferdocoins:856991023754772521>\n**Tiger** -  800 <:Alferdocoins:856991023754772521>\n").addField("Legendary Pets","\nDragon -   5000 <:Alferdocoins:856991023754772521>\nArctic Wolf -  4500 <:Alferdocoins:856991023754772521>\nEagle -  2000 <:Alferdocoins:856991023754772521>");e.channel.send(t);break;case"-a help pictures":case"-a help images":t=(new Discord.MessageEmbed).setTitle("Pictures").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Random Animal Pics","\n:cat: `-a cat` - Show me a cat\n:dog: `-a dog` - Show me a dog\n:parrot: `-a bird` - Show me a bird\n:fox: `-a fox` - Show me a fox\n:panda_face: `-a panda` - Show me a panda\n:panda_face: `-a red panda` - Show me a red panda\n:kangaroo: `-a kangaroo` - Show me a kangaroo\n:raccoon: `-a raccoon`- Show me a raccoon\n:koala: `-a koala` - Show me a koala\n\n**Anime**\n\n:hugging: - `-a anime hug` - Show me a hugging anime gif\n:wink: - `-a anime wink` - Show me a wink anime gif\n:hand_splayed: - `-a anime pet` - Show me a pet anime gif\n\n**Image generators**\n:frame_photo: `-a random image` - Show random image\n`-a image generator wasted`\n`-a image generator glass`\n`-a image generator passed`\n`-a image generator jail`\n`-a image generator comrade`\n`-a image generator simpcard`\n`-a image generator simpcard`\n`-a image generator pixelate`\n`-a image generator blur`\n`-a image generator lolice`\n`-a image generator horny`\n\n`-a image generator yt comment YOUR_TEXT_HERE`\n`-a image generator tweet YOUR_TEXT_HERE`\n");e.channel.send(t);break;case"-a help music":t=(new Discord.MessageEmbed).setTitle("Pictures").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Music","\n`-a lyrics SONG_NAME` - Find lyrics of song\n`-a play SONG_NAME` - Play song in voice channel which you're in\n");e.channel.send(t);break;case"-a help random":t=(new Discord.MessageEmbed).setTitle("Pictures").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Random","\n:8ball: `-a 8ball [question]` - 8ball a question\n:robot: `-a roll dice` - Roll a dice\t\n:robot: `-a rpc [rock, paper, scissors]` - Rock Paper \tScissors\n<:Alferdocoins:856991023754772521> `-a flip coin OR -a coinflip`- Flip a coin\n");e.channel.send(t);break;case"-a help meme":t=(new Discord.MessageEmbed).setTitle("Pictures").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Memes!","\n:laughing: `-a meme` - Show me a meme!\n\nType `-a creatememe` for help on how to generate memes!\n");e.channel.send(t);break;case"-a help other":t=(new Discord.MessageEmbed).setTitle("Pictures").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Other","\n:partying_face: `-a bday Name | Message` - Wish someone happy birthday, with a gif, embed, and message!\n:person_pouting: `-a profile` - View profile\t\n`-a delete 10` (Or any #) - Delete last # of messages (ADMIN only)\n:slight_smile: `-a r :slight_smile: ` - (For example), react to the last message in current channel\n:robot: `-a credits`  - Credits for this bot\n");e.channel.send(t);break;case"-a help money":t=(new Discord.MessageEmbed).setTitle("Pictures").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Money","\n:slot_machine: `-a slots 100` - Win/lose <:Alferdocoins:856991023754772521> 100\n:moneybag: `-a steal @user` - Steal from a user\n:briefcase: `-a work` - Work\n:money_mouth: `-a leaderboard` - View top 10 richest people in server\n:money_with_wings: `-a beg` - Beg for coins\n:bank: `-a balance` - View Balance\n:innocent: `-a toggle passive mode` Turn on passive mode\n");e.channel.send(t);break;case"-a help embeds":t=(new Discord.MessageEmbed).setTitle("Embeds").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("To create an embed, enter the following text","\n-a `embed Title` | `Description` | `HEX Color Code`  | `Thumbnail URL` |  `Image URL`\n").setFooter('If you want to skip a field, just type "skip", and type the | character').addField("Where do I find a hex code? ",'Search up "Color Picker" on google, pick your color, and copy the HEX code!');e.channel.send(t);break;case"-a help":case"-a commands":case"<@!844303394335096862>":case"-a cmds":;!function(){const t=(new Discord.MessageEmbed).setTitle("Commands").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setFooter("Want more features? Email me at: manuthecoder@protonmail.com").setThumbnail("https://icons-for-free.com/iconfiles/png/512/circle+command+key+keyboard+modifier+icon-1320196704338840666.png").setDescription(" *All Commands begin with an `-a`*").addField("Random","`-a help random`").addField("Pictures","`-a help pictures`").addField("Music","`-a help music`").addField("Other Commands","`-a help other`").addField("Embeds","`-a help embeds`").addField("Memes","`-a help meme`").addField("Money"," `-a help money` ").addField("Shop & Pets"," `-a pet actions` ");e.channel.send(t)}();break;case"-a dog":t=(new Discord.MessageEmbed).setTitle("Please wait").setColor([222,38,53]).setDescription("Fetching image");e.channel.send(t).then(e=>{e.id;var t;fetch("https://some-random-api.ml/facts/dog",{method:"Get"}).then(e=>e.json()).then(a=>{t=a.fact,fetch("https://some-random-api.ml/img/dog",{method:"Get"}).then(e=>e.json()).then(a=>{e.edit((new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(a.link).setDescription("**Fun fact:** "+t).setImage(a.link).setTitle("View Picture"))})})});break;case"-a meme":fetch("https://meme-api.herokuapp.com/gimme",{method:"Get"}).then(e=>e.json()).then(t=>{var a=(new Discord.MessageEmbed).setTitle(t.title).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setURL(t.postLink).setImage(t.url).setFooter("üëç "+t.ups+" | "+t.author);e.channel.send(a)});break;case"-a work":if(talkedRecently.has(e.author.id)){t=(new Discord.MessageEmbed).setTitle("Slow it down!").setColor([222,38,53]).setDescription("Whoah whoah woah. Easy there buddy! There's no point in spamming this command. You are tired from working, and you need to wait 2 seconds before working again,  <@!"+e.author+">");e.channel.send(t)}else{o=JSON.parse(fs.readFileSync("./database/money.json","utf-8"));var c=getRandomInt(5,20);"null"==o[e.author.id]||"undefined"==o[e.author.id]||null==o[e.author.id]?o[e.author.id]=0:o[e.author.id]=o[e.author.id]+c;t=(new Discord.MessageEmbed).setTitle("Work").setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).addField("Coins Earned",c+" <:Alferdocoins:856991023754772521>").addField("Coin Balance: ",o[e.author.id]+" coins");e.channel.send(t),fs.writeFileSync("./database/money.json",JSON.stringify(o,null,"\t"),"utf-8"),e.react("üíº"),talkedRecently.add(e.author.id),setTimeout(()=>{talkedRecently.delete(e.author.id)},2e3)}break;case"-a my pets":if((V=JSON.parse(fs.readFileSync("./database/pets.json","utf-8")))[e.author.id]){V=V[e.author.id];var l="";for(const[e,t]of Object.entries(V))l+=`**${ucfirst(e)}**\nQuantity: ${t.qty}\nHappiness: ${t.happiness||0}\n\n`;t=(new Discord.MessageEmbed).setTitle("Pets").setColor([235,229,73]).setDescription(l);e.channel.send(t)}else{t=(new Discord.MessageEmbed).setTitle("Pets").setColor([235,229,73]).setDescription("No pets owned. Use `-a pet list` to see the list of pets and `-a buy [pet]` to buy a pet.");e.channel.send(t)}break;case"-a image generator wasted":case"-a image generator jail":case"-a image generator glass":case"-a image generator passed":case"-a image generator comrade":case"-a image generator simpcard":case"-a image generator pixelate":case"-a image generator blur":case"-a image generator lolice":case"-a image generator horny":case"-a image generator triggered":var m="https://some-random-api.ml/canvas/"+encodeURIComponent(e.content.replace("-a image generator ",""))+"?avatar="+encodeURIComponent(e.author.displayAvatarURL({format:"png"}));e.channel.send(new MessageAttachment(m,"img.gif"));break;case"-a leaderboard":case"-a top":case"-a richest":var p=[],h=JSON.parse(fs.readFileSync("./database/money.json","utf-8"));client.guilds.cache.get(e.guild.id).members.cache.map(e=>e.id).forEach(e=>{for(const[t,a]of Object.entries(h))e==t&&p.push({KEY:t,VALUE:a})});var g=p=p.sort(compare).reverse();p="",g.slice(0,10).forEach(e=>{var t=client.users.cache.get(e.KEY).username;p+=` **${t.trim()}** - ${e.VALUE}  <:Alferdocoins:856991023754772521>\n\t\t\t\t`});t=(new Discord.MessageEmbed).setTitle("Top 10 richest people in this server").setColor([235,229,73]).setDescription(p);e.channel.send(t);break;case"-a balance":case"-a bal":"null"==(o=JSON.parse(fs.readFileSync("./database/money.json","utf-8")))[e.author.id]||"undefined"==o[e.author.id]||null==o[e.author.id]?o[e.author.id]=0:o[e.author.id];t=(new Discord.MessageEmbed).setTitle("Balance").setColor([235,229,73]).addField("Coin Balance: ",o[e.author.id]+" coins");e.channel.send(t),fs.writeFileSync("./database/money.json",JSON.stringify(o,null,"\t"),"utf-8");break;case"-a pet actions":t=(new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setTitle("Pet Actions").setDescription("\nUse `-a shop` for list of items\nUse `-a pet actions` for list of pet actions\nUse `-a pet list` for list of pets\nUse `-a buy [PET NAME]` to buy a pet\nUse `-a my pets` to view pets owned\n\n**-a pet [pet_name]** - Pet a pet!\n**-a pet play [pet_name]** - Play with a pet\n**-a pet hug [pet_name]** - Hug a pet!\n**-a pet list** - View owned pets!\n");e.channel.send(t);break;case"-a buy padlock":if((o=JSON.parse(fs.readFileSync("./database/money.json","utf-8")))[e.author.id]&&o[e.author.id]-300>=0){o[e.author.id]=o[e.author.id]-300;var u=JSON.parse(fs.readFileSync("./database/padlocks.json","utf-8"));null==u[e.author.id]?u[e.author.id]=1:u[e.author.id]++,fs.writeFileSync("./database/padlocks.json",JSON.stringify(u,null,"\t"),"utf-8")}else e.channel.send("Not enough Money!");fs.writeFileSync("./database/money.json",JSON.stringify(o,null,"\t"),"utf-8"),e.channel.send("**Purchase complete**\nPadlocks are applied automatically!");break;case"-a inv":case"-a invite":e.channel.send((new Discord.MessageEmbed).setTitle("Invite me!").setURL("https://discord.com/api/oauth2/authorize?client_id=844303394335096862&permissions=8&scope=bot").setDescription("https://discord.com/api/oauth2/authorize?client_id=844303394335096862&permissions=8&scope=bot").setColor("#ffffff"));break;default:if(e.content.startsWith("-a rpc")){var f=e.content.replace("-a rpc ","");if("rock"==f.toLowerCase()||"scissors"==f.toLowerCase()||"paper"==f.toLowerCase()){var b=getArrayRandomElement(["rock","paper","scissors"]),y=!1;if(b==f){var w=[201,185,56];y="Tie  :neutral_face:"}else if("paper"==f&&"scissors"==b||"rock"==f&&"paper"==b||"scissors"==f&&"rock"==b){w=[201,81,56];y="You Lost  :slight_frown:"}else{w=[62,150,62];y="You won!\t:partying_face:"}switch(f){case"rock":s="https://images.vexels.com/media/users/3/145827/isolated/preview/357f06ecbaaa77d750259c459c0ed55f-round-rock-illustration-by-vexels.png";break;case"paper":s="https://img.freepik.com/free-vector/white-paper-sheet-illustration_275806-797.jpg?size=338&ext=jpg";break;case"scissors":s="https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Scissors_icon_black.svg/1024px-Scissors_icon_black.svg.png"}t=(new Discord.MessageEmbed).addField("Your input: ",f).setColor(w).setTitle(y).setThumbnail(s).addField("Computer's input: ",b);e.channel.send(t)}}else if(e.content.startsWith("-a image generator yt comment")){m="https://some-random-api.ml/canvas/youtube-comment?avatar="+encodeURIComponent(e.author.displayAvatarURL({format:"png"}))+"&username="+encodeURIComponent(e.author.username)+"&comment="+encodeURIComponent(e.content.replace("-a image generator yt comment ",""));e.channel.send(new MessageAttachment(m,"img.gif"))}else if(e.content.startsWith("-a image generator tweet")){m="https://some-random-api.ml/canvas/tweet?avatar="+encodeURIComponent(e.author.displayAvatarURL({format:"png"}))+"&username="+encodeURIComponent(e.author.username+" ")+"&displayname="+encodeURIComponent(e.author.username)+"&comment="+encodeURIComponent(e.content.replace("-a image generator tweet ",""));e.channel.send(new MessageAttachment(m,"img.gif"))}else if(e.content.startsWith("-a play")){var I,k=!0;if(e.member.voice.channel){const t=await e.member.voice.channel.join();var R=e.content.replace("-a play ","");matchYoutubeUrl(R)||(k=!1,fetch("https://www.googleapis.com/youtube/v3/search?q="+encodeURIComponent(R)+"&key="+process.env.youtubeToken,{method:"Get"}).then(e=>e.json()).then(a=>{R="https://www.youtube.com/watch?v="+a.items[0].id.videoId,console.log(R),(I=t.play(ytdl(R))).on("start",()=>{var n;console.log("audio.mp3 is now playing!"),a.items.forEach(e=>{n+=`https://www.youtube.com/watch?v=${e.id.videoId}\n\t`}),e.channel.send((new Discord.MessageEmbed).setTitle("Search Results").setDescription(n.replace("undefined","")).addField("Currently playing",R).addField("Note","If the video is longer than 2 hours, you might experience minor lag"));const s=e.member.id;client.on("message",e=>{e.author.id==s&&"-a stop"==e.content&&(t.disconnect(),e.channel.send("Stoped music!"))})}),I.on("finish",()=>{t.disconnect(),e.channel.send((new Discord.MessageEmbed).setTitle("Finished").setURL(R).setDescription("Successfully played "+R)),console.log("audio.mp3 has finished playing!")}),I.on("error",console.error)})),1==k&&((I=t.play(ytdl(R))).on("start",()=>{console.log("audio.mp3 is now playing!"),e.channel.send(`Currently playing \`${R}\`!`),client.on("message",e=>{e.author.id==e.member.id&&"-a stop"==e.content&&t.disconnect()})}),I.on("finish",()=>{console.log("audio.mp3 has finished playing!")}),I.on("error",console.error))}else e.channel.send("You must be in a voice channel first!")}else if(e.content.startsWith("-a clear")){var v=e.content.replace("-a clear","");if(e.member.hasPermission("ADMINISTRATOR")){!async function(){e.delete();const t=await e.channel.messages.fetch({limit:v});e.channel.bulkDelete(t)}(),e.reply("Cleared "+v+" messages!")}else e.reply("You don't have admin permissions!")}else if(e.content.startsWith("-a buy"))if("-a buy"!==e.content){var D=e.content.replace("-a buy ",""),S=!1;h=JSON.parse(fs.readFileSync("./database/money.json","utf-8"));switch(D){case"dog":S=300;break;case"lizard":S=500;break;case"cat":S=300;break;case"parrot":S=350;break;case"rock":S=300;break;case"frog":S=400;break;case"owl":S=500;break;case"snake":S=550;break;case"tropical parakeet":case"cougar":S=600;break;case"tiger":S=800;break;case"dragon":S=5e3;break;case"arctic wolf":S=4500;break;case"eagle":S=2e3;break;default:return e.reply("Invalid pet name!"),!1}if(h[e.author.id]>=S){if(h[e.author.id]=h[e.author.id]-S,(V=JSON.parse(fs.readFileSync("./database/pets.json","utf-8")))[e.author.id])(E=V[e.author.id])[D]?E[D].qty++:E[D]={qty:1};else V[e.author.id]={},(E=V[e.author.id])[D]?E[D]++:E[D]={qty:1};fs.writeFileSync("./database/pets.json",JSON.stringify(V,null,"\t"),"utf-8"),fs.writeFileSync("./database/money.json",JSON.stringify(h,null,"\t"),"utf-8"),e.reply("Bought pet successfully!")}else e.reply("You don't have enough money!")}else e.reply("Invalid pet name");else if(e.content.startsWith("-a steal")){if(E=(E=e.content.replace("-a steal ","")).replace("<@!","").replace(">",""),!(F=client.users.cache.get(E)))return e.reply("Invalid!"),!1;if(0==F.bot){o=JSON.parse(fs.readFileSync("./database/money.json","utf-8"));var T=JSON.parse(fs.readFileSync("./database/padlocks.json","utf-8")),C=JSON.parse(fs.readFileSync("./database/passive.json","utf-8"));if(1==C[e.author.id]){t=(new Discord.MessageEmbed).setColor([235,64,52]).setTitle("Steal").setDescription("You're currently on passive mode!");return e.channel.send(t),!1}if(1==C[E]){t=(new Discord.MessageEmbed).setColor([235,64,52]).setTitle("Steal").setDescription("Hey, leave that passive peace-loving hippy alone!");return e.channel.send(t),!1}if(!T[E]>0){T[E]-1>=0?T[E]--:T[E]=0,fs.writeFileSync("./database/padlocks.json",JSON.stringify(T,null,"\t"),"utf-8");var M=getRandomInt(0,100);if(0!==o[E]&&"undefined"!==o[E]&&"null"!==o[E]&&o[E]-M>=0){o[E]=o[E]-M,o[e.author.id]=o[e.author.id]+M,fs.writeFileSync("./database/money.json",JSON.stringify(o,null,"\t"),"utf-8");t=(new Discord.MessageEmbed).setColor([235,64,52]).setTitle("Steal").setDescription("You stole: "+M+" <:Alferdocoins:856991023754772521>");e.channel.send(t)}else{t=(new Discord.MessageEmbed).setColor([235,64,52]).setTitle("Steal").setDescription("User doesn't have enough money to steal!");e.channel.send(t)}}else{T[E]-1>=0&&T[E]--,(q=JSON.parse(fs.readFileSync("./database/money.json","utf-8")))[e.author.id]&&(q[e.author.id]=q[e.author.id]-500),fs.writeFileSync("./database/money.json",JSON.stringify(q,null,"\t"),"utf-8"),fs.writeFileSync("./database/padlocks.json",JSON.stringify(T,null,"\t"),"utf-8"),e.channel.send("User has padlock attached to wallet! You got caught lost <:Alferdocoins:856991023754772521> 500")}}else e.channel.send("Hey, go pick on someone your own size! You can't steal from bots....")}else if(e.content.startsWith("-a profile")||e.content.startsWith("-a me")){if(e.content.includes("-a meme"))return!1;p=[],h=JSON.parse(fs.readFileSync("./database/money.json","utf-8"));if(client.guilds.cache.get(e.guild.id).members.cache.map(e=>e.id).forEach(e=>{for(const[t,a]of Object.entries(h))e==t&&p.push({KEY:t,VALUE:a})}),p=p.sort(compare).reverse(),"-a profile"==e.content||"-a me"==e.content)var E={id:e.author.id,name:e.author.tag,pic:e.author.avatar,bot:e.author.bot,full:e.author};else{var F;if(!(F=client.users.cache.get(e.content.replace(/\D/g,""))))return e.reply("Invalid User!"),!1;E={id:e.content.replace(/\D/g,""),name:F.tag,pic:F.avatar,full:F,bot:F.bot}}if(!E.id||!E.name||!E.full)return e.reply("Invalid User"),!1;if(0==E.bot){if((V=JSON.parse(fs.readFileSync("./database/pets.json","utf-8")))[e.author.id]){l="";if("undefined"!==(V=V[E.id])&&void 0!==V)for(const[e,t]of Object.entries(V))l+=`**${t.qty}** ${e}s\n`;else l="No pets owned"}else l="No pets owned.";var N=!1;for(r=0;r<p.length;r++)if(p[r].KEY==E.id){N=!0;break}var j=JSON.parse(fs.readFileSync("./database/xp.json","utf-8"));o=JSON.parse(fs.readFileSync("./database/money.json","utf-8")),t=(new Discord.MessageEmbed).setTitle(E.name).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setDescription(1==N?" :moneybag: Top 10 richest people in server!":"").setThumbnail("https://cdn.discordapp.com/avatars/"+E.id+"/"+E.pic+".png?size=256").addField("Balance",(o[E.id]?o[E.id]:"0")+" <:Alferdocoins:856991023754772521>").addField("Pets",l).addField("XP",j[E.id]+" :green_circle:"||"No XP!");e.channel.send(t)}else e.reply("User is bot!")}else if(e.content.startsWith("-a embed")){var A=e.content.replace("-a embed","").split("|")[0]||"",_=e.content.replace("-a embed","").split("|")[1]||"",U=(w=e.content.replace("-a embed","").split("|")[2]||"",e.content.replace("-a embed","").split("|")[3]||""),P=e.content.replace("-a embed","").split("|")[4]||"";t=(new Discord.MessageEmbed).setTitle(A).setDescription(_).setColor(w);validURL(U.trim())&&(console.log(1),t.setThumbnail(U.trim())),validURL(P.trim())&&t.setImage(P.trim()),console.log(t),e.delete(),e.channel.send(t)}else if(e.content.startsWith("-a creatememe")){if("-a creatememe"==e.content){e.channel.send("Create a meme by typing: \n`-a creatememe TOP_TEXT | BOTTOM_TEXT | TEMPLATE_NAME`\n\nTemplate Name List:\n\t");const t=new MessageAttachment("templates.txt");return e.channel.send(t),!1}var O=e.content.replace("-a creatememe","").split("|")[0]||"undefined",J=e.content.replace("-a creatememe","").split("|")[1]||"undefined";console.log(O);var L=e.content.replace("-a creatememe","").split("|")[2].trim().replace(/\s/g,"-")||"10-guy";if(console.log(L),L=toTitleCase(L),O&&J&&L){var x=`https://apimeme.com/meme?meme=${L}&top=${encodeURIComponent(O)}&bottom=${encodeURIComponent(J)}`;console.log(x);t=(new Discord.MessageEmbed).setColor([235,64,52]).setImage(x);e.channel.send(t)}else e.reply("Invalid meme request!")}else if(e.content.startsWith("-a slots"))if("-a slots"==e.content){t=(new Discord.MessageEmbed).setTitle("Slots").setColor([235,229,73]).setDescription("Incorrect value for slots. Please specify money to earn/lose. Example: -a slots 10");e.channel.send(t)}else{var W=parseInt(e.content.replace("-a slots ",""));d=getArrayRandomElement(cf);if((h=JSON.parse(fs.readFileSync("./database/money.json","utf-8")))[e.author.id]&&parseInt(h[e.author.id])-parseInt(W)>=0)if("Heads"==d){h[e.author.id]=h[e.author.id]+W;t=(new Discord.MessageEmbed).setTitle("Slots").setColor([235,229,73]).setDescription("You won <:Alferdocoins:856991023754772521>‚†Ä"+W+"!");e.channel.send(t),fs.writeFileSync("./database/money.json",JSON.stringify(h,null,"\t"),"utf-8")}else{h[e.author.id]=h[e.author.id]-W;t=(new Discord.MessageEmbed).setTitle("Slots").setColor([235,229,73]).setDescription("You lost <:Alferdocoins:856991023754772521>‚†Ä"+W+"!");e.channel.send(t),fs.writeFileSync("./database/money.json",JSON.stringify(h,null,"\t"),"utf-8")}else e.reply("Not enough coins!")}else if(e.content.startsWith("-a cn")){if(e.member.hasPermission("ADMINISTRATOR")){if(e.content.replace("-a cn ","").toString().length>32)return void e.channel.send("Username must be 32 or fewer in length!");e.guild.me.setNickname(e.content.replace("-a cn ","")),e.channel.send((new Discord.MessageEmbed).setTitle("Nickname change").setDescription(":white_check_mark: Successfully changed nickname to "+e.content.replace("-a cn ","")).setColor("#ffffff"))}}else if(e.content.startsWith("-a bday"))fetch("https://api.giphy.com/v1/gifs/search?q=Happy+Birthday&api_key="+process.env.giphyKey,{method:"Get"}).then(e=>e.json()).then(t=>{var a=t.data[Math.floor(Math.random()*t.data.length)];console.log(a);var n=e.content.replace("-a bday","").split("|")[0],s=e.content.replace("-a bday","").split("|")[1]||"",o=(new Discord.MessageEmbed).setTitle("Happy Birthday, "+n+"!!!").setColor([235,229,73]).setDescription(s).setFooter(a.title+" | "+a.username).setImage(a.images.original.url).setURL(a.images.original.url);e.delete(),e.channel.send(o)});else if(e.content.startsWith("-a r")){var Y=e.content.replace("-a r ","");e.channel.lastMessage.react(Y),e.channel.messages.fetch({limit:10}).then(e=>{console.log(e),e.last().react(Y)}),e.delete()}else if(e.content.startsWith("-a pet")){var V=JSON.parse(fs.readFileSync("./database/pets.json","utf-8"));D=e.content.replace("-a pet ","").replace("hug ","").replace("play ","").toLowerCase();if(!V[e.author.id])return e.reply("You don't have any pets!"),!1;var $=V[e.author.id];if($[D])if(e.content.startsWith("-a pet hug"))e.reply("You hugged your "+D+", Awwwww!");else if(e.content.startsWith("-a pet play"))if(pet_actions.has(e.author.id)){t=(new Discord.MessageEmbed).setTitle("Slow it down!").setColor([222,38,53]).setDescription("You're tired after playing with your "+D+"!");e.channel.send(t)}else{var G=JSON.parse(fs.readFileSync("./database/money.json","utf-8"));(j=JSON.parse(fs.readFileSync("./database/xp.json","utf-8")))[e.author.id]?j[e.author.id]=j[e.author.id]+10:j[e.author.id]=1,fs.writeFileSync("./database/xp.json",JSON.stringify(j,null,"\t"),"utf-8");var z=getRandomInt(1,5);G[e.author.id]?G[e.author.id]+=z:G[e.author.id]=z,$[D].happiness?$[D].happiness++:$[D].happiness=1,V[e.author.id]=$;t=(new Discord.MessageEmbed).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setTitle(ucfirst(D)).setDescription(`You played with your your ${D}!`).addField("Result",`+ ${z} <:Alferdocoins:856991023754772521>\n+  10 :green_circle:\n+ 1% Happiness`);e.channel.send(t),fs.writeFileSync("./database/money.json",JSON.stringify(G,null,"\t"),"utf-8"),fs.writeFileSync("./database/pets.json",JSON.stringify(V,null,"\t"),"utf-8"),pet_actions.add(e.author.id),setTimeout(()=>{pet_actions.delete(e.author.id)},5e3)}else e.reply("You petted your "+D+"!");else e.reply("You don't own this pet!")}else if(e.content.startsWith("-a textart"))figlet(e.content.replace("-a textart ",""),function(t,a){if(t)return console.log("Something went wrong..."),void console.dir(t);e.channel.send(`\n\`${a.replace("`"," ")}\`   \n\nNote: Text might break on mobile!\n\t\t\t\t\t\t`),e.delete()});else if(e.content.startsWith("-a 8ball")){var q,B=e.content.replace("-a 8ball ","");if(1==(q=getArrayRandomElement(q=[["It is Certain.",1],["Without a doubt",1],["It is decidedly so.",1],["Yes definitely.",1],["You may rely on it.",1],["As I see it, yes",1],["Most likely.",1],1,["Affirmative",1],["Signs point to yes",1],["Reply hazy, try again",2],["Ask again later",2],["Better not tell you now.",2],["Cannot predict now.",2],["Concentrate and ask again",2],["Don't count on it.",3],["My reply is no.",3],["My sources say no.",3],["Outlook not so good.",3],["Very doubtful.",3][3]]))[1])w=[81,214,58];else if(2==q[1])w=[252,186,3];else w=[222,38,53];t=(new Discord.MessageEmbed).setTitle(B).setColor(w).setDescription(q[0]);e.channel.send(t)}else e.content.startsWith("-a lyrics")&&async function(t,a){let n=await lyricsFinder("",a)||"Not Found!";e.channel.send((new Discord.MessageEmbed).setTitle(ucfirst(e.content.replace("-a lyrics ",""))).setColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)]).setDescription(n))}(0,e.content.replace("-a lyrics ",""))}}),client.on("ready",()=>{client.user.setActivity("to -a help",{type:"LISTENING"}).then(e=>console.log(`Activity set to ${e.activities[0].name}`)).catch(console.error),console.log(`Logged in as ${client.user.tag}!`)}),Array.prototype.remove=function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1)};